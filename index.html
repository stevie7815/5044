<!DOCTYPE html>
<html>

<head>
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <title>CS5044: Practical 2 </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <header>
        <h1>Which Social Movements & Protests had the largest impact on police shootings?</h1>
        <hr>
    </header>
    <main class="wrapper">
        <div>
            <a class="dataset" href="data/dataset.csv" target="_blank">Data Set</a>
        </div><br><br>
        <h1>Police Shootings by Age Bracket</h1>

        <div id="chart"></div>

    </main>
    <footer>
        <p>Created by: sd302 & ifz1</p>
    </footer>

    <script>
/*
/*  attempt at barchart - data not printing *
        // set dimensions and margins
        var margin = {
            top: 20,
            right: 30,
            bottom: 50,
            left: 50
        };
        var width = 600 - margin.left - margin.right;
        var height = 400 - margin.top - margin.bottom;


        var svg = d3.select("#chart")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

        // load data
        d3.csv("data/dataset.csv", function (data) {
            console.log("first data " + data);

            //change age strings to numeric values
            data.forEach(d => d.age = +d.age);

            console.log("for each" + data);

            // group data by age
            var groupedData = d3.nest()
                .key(function (d) {
                    if (d.age < 18) {
                        return "<18";
                    }
                    else if (d.age < 25) {
                        return "18-24";
                    }
                    else if (d.age < 35) {
                        return "25-34";
                    }
                    else if (d.age < 45) {
                        return "35-44";
                    }
                    else if (d.age < 55) {
                        return "45-54";
                    }
                    else {
                        return "55+";
                    }
                })
                .rollup(function (v) { return v.length; })
                .entries(data);

            // create x and y scale
            var x = d3.scaleBand()
                .range([0, width])
                .padding(0.1);

            var y = d3.scaleLinear()
                .range([height, 0]);

            // set scale domains
            x.domain(groupedData.map(function (d) { return d.key; }));
            y.domain([0, d3.max(groupedData, function (d) { return d.value; })]);

            // add x-axis
            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x));

            // add y axis
            svg.append("g")
                .attr("class", "y axis")
                .call(d3.axisLeft(y));

            // add bars
            svg.selectAll(".bar")
                .data(groupedData)
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", function (d) { return x(d.key); })
        })
*/

    </script>
</body>

</html>